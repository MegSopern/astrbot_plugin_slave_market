# AstrBot 奴隶市场插件

一个为 **AstrBot** 开发的群聊文字游戏插件。在这个奇妙的市场中，玩家可以体验当主人和奴隶的乐趣，通过各种方式赚取金币，提升身价！

> 🔄 **从Yunzai-Bot V3转换而来**
>
> 本插件基于原Yunzai-Bot V3的奴隶市场插件进行全面转换和优化，适配AstrBot框架。

## 🌟 游戏特色

### 💰 经济系统
- 完善的金币系统
- 银行存取功能
- 信用等级提升
- 动态的市场经济

### 👥 社交玩法
- 购买其他玩家作为奴隶
- 训练提升奴隶价值
- 放生奴隶获得好感
- 丰富的互动体验

### ⚔️ 竞技系统
- 奴隶决斗对战
- 排位赛晋级
- 段位等级提升
- 丰厚的竞技奖励

### 📊 排行系统
- 奴隶身价排行
- 玩家资金排行
- 实时数据更新
- 竞争氛围浓厚

### 🔄 每周重置系统
- 自动每周重置存档
- 排行榜历史记录
- 数据自动备份
- 公平竞争环境

## 🔧 安装方法

### 1. 下载插件

将插件文件夹 `astrbot_plugin_slave_market` 放入 AstrBot 的 `data/plugins` 目录下。

### 2. 安装依赖

在插件目录下执行：

```bash
pip install -r requirements.txt
```

### 3. 配置插件

插件会自动创建配置文件 `config.yaml`，你可以根据需要修改配置。

### 4. 重启 AstrBot

重启 AstrBot 后插件即可生效。

## 📝 使用说明

发送 `#奴隶帮助` 查看详细指令。

### 🎮 游戏玩法

**基础经济循环**：
1. 通过 `#打工` 赚取初始金币
2. 使用 `#购买奴隶` 购买其他玩家
3. 通过 `#训练` 提升奴隶价值
4. 参与 `#决斗` 和 `#排位赛` 获得奖励
5. 使用 `#银行` 管理资金和利息

**每周重置机制**：
- 每周一 00:00 自动重置所有玩家数据
- 重置前自动保存排行榜历史记录
- 重置后显示上周排行榜回顾
- 保持游戏新鲜感和公平竞争

**排行榜系统**：
- 实时更新金币、身价、奴隶数量、银行等级排行
- 支持查看上周历史排行榜
- 重置时自动展示上周成绩
- 激励玩家持续参与游戏

### 🎯 基础指令

#### 基础功能
- `#奴隶市场` - 查看市场信息
- `#购买奴隶 @群友/QQ号` - 购买其他玩家作为奴隶
- `#我的奴隶` - 查看自己的信息和奴隶信息
- `#打工` - 赚取金币

#### 银行系统
- `#银行信息` - 查看银行信息
- `#存款 数量` - 将金币存入银行
- `#取款 数量` - 从银行取出金币
- `#升级信用` - 提升银行信用等级
- `#领取利息` - 领取银行利息

#### 奴隶管理
- `#赎身` - 按照身价的1.5倍价格赎身
- `#放生奴隶 @群友/QQ号` - 放生指定的奴隶
- `#奴隶详情 @群友/QQ号` - 查看用户详细信息

#### 竞技系统
- `#训练奴隶` - 训练奴隶提升价值
- `#奴隶决斗` - 奴隶对战
- `#排位赛` - 参与竞技排位赛

#### 排行榜
- `#排行榜` - 查看所有排行榜
- `#金币排行` - 查看金币排行榜
- `#身价排行` - 查看身价排行榜
- `#奴隶排行` - 查看奴隶数量排行榜
- `#段位排行` - 查看段位排行榜

#### 每周重置功能
- `#奴隶重置状态` - 查看重置系统状态
- `#上周排行榜` - 查看上周各项排行榜
- `#手动奴隶重置` - 手动执行重置（管理员）

## ⚙️ 配置说明

插件配置文件 `config.yaml` 包含以下主要配置项：

### 经济系统配置
- **buyBack**: 赎身相关配置
- **rob**: 抢劫相关配置
- **work**: 打工相关配置
- **purchase**: 购买相关配置

### 银行系统配置
- **bank**: 银行功能配置，包括利率、限额、升级价格等

### 竞技系统配置
- **training**: 训练功能配置
- **arena**: 竞技场配置
- **ranking**: 排位赛配置

### 每周重置配置
- **weeklyReset**: 重置功能配置，包括重置时间、保留数据等

## 🛠️ 开发说明

### 文件结构
```
astrbot_plugin_slave_market/
├── __init__.py          # 主插件文件
├── bank.py              # 银行功能模块
├── training.py          # 训练竞技模块
├── ranking.py           # 排行榜模块
├── slave_management.py  # 奴隶管理模块
├── weekly_reset.py      # 每周重置模块
├── config.yaml          # 配置文件
├── metadata.yaml        # 插件元数据
├── requirements.txt     # 依赖列表
└── resources/           # 资源文件
    ├── data/
    │   └── workCopywriting.json  # 打工文案
    └── html/
        └── help/
            ├── help.html # 帮助页面
            └── help.css  # 帮助页面样式
```

### 扩展开发

如果你想扩展插件功能，可以参考以下步骤：

1. **添加新指令**：在主文件的对应模块中添加新的方法，使用 `@filter.command()` 装饰器
2. **添加新功能**：创建新的功能模块，参考现有模块的结构
3. **修改配置**：更新 `config.yaml` 添加新的配置项
4. **更新帮助**：修改 `resources/html/help/help.html` 添加新功能的说明

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进插件！

### 开发规范
1. 代码需经过充分测试
2. 保持良好的注释
3. 遵循 Python 编码规范
4. 使用异步编程模式

## 📄 许可证

本项目采用 MIT 许可证。

## 🙏 致谢

感谢原Yunzai-Bot V3奴隶市场插件的作者 Tloml-Starry 提供的优秀创意和基础功能。

感谢AstrBot开发团队提供的优秀机器人框架。

---

**享受游戏，快乐群聊！** 🎮✨